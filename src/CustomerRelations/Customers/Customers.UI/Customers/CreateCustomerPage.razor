@page "/Customers/create"
@using System.ComponentModel.DataAnnotations
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@attribute [Authorize]

<MudText Typo="Typo.h3" Class="mb-4">New Customer</MudText>

<MudPaper Class="pa-4" Elevation="25">
    <MudText>Customer type</MudText>

    <MudRadioGroup @bind-Value="IsPerson" Class="mb-4">
        <MudRadio Value="true" Color="Color.Primary" Dense="true">Person</MudRadio>
        <MudRadio Value="false" Color="Color.Secondary" Dense="false">Organization</MudRadio>
    </MudRadioGroup>

    @if(IsPerson) 
    {
        <CreatePersonForm Address="Address" />
    }
    else 
    {
        <CreateOrganizationForm Address="Address" />
    }
</MudPaper>

@code {
    [Required]
    public string Name { get; set; } = null!;

    public string? DisplayName { get; set; }

    public bool IsPerson { get; set; } = true;

    public AddressFormModel Address { get; set; } = new AddressFormModel();

    private async Task Submit()
    {
        /*
        var dto = await CustomersClient.CreateCustomerAsync(new CreateCustomer {
            Description = Description
        });

       NavigationManager.NavigateTo($"/Customers/{dto.Id}");
       */
    }
}